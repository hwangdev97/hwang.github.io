<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>#04 ｜ 恣意生长  by Hwang - Hwang&#39;s Blog</title>
<link rel="shortcut icon" href="https://hwang.top/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://hwang.top/media/css/tailwind.css">
<link rel="stylesheet" href="https://hwang.top/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="#04 ｜ 恣意生长  by Hwang - Hwang&#39;s Blog - Atom Feed" href="https://hwang.top/atom.xml">


  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159350557-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-159350557-1');
  </script>
    

  <meta name="description" content="Hi，好久不见。本期间隔时间稍微长了一些呀，因为最近都比较忙，工作也比较忙，自己的小项目也遇到了些困难。不过好在方向都是好的，做自己愿意做的事情，总是快乐的。
这段时间我听了几期感觉还不错的播客，推荐给大家：

[中美 SaaS 对比：差距..." />
  <meta property="og:title" content="#04 ｜ 恣意生长  by Hwang - Hwang&#39;s Blog">
  <meta property="og:description" content="Hi，好久不见。本期间隔时间稍微长了一些呀，因为最近都比较忙，工作也比较忙，自己的小项目也遇到了些困难。不过好在方向都是好的，做自己愿意做的事情，总是快乐的。
这段时间我听了几期感觉还不错的播客，推荐给大家：

[中美 SaaS 对比：差距..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://hwang.top/post/04-or-zi-yi-sheng-chang-by-hwang/" />
  <meta property="og:image" content="https://hwang.top/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="#04 ｜ 恣意生长  by Hwang - Hwang&#39;s Blog">
  <meta name="twitter:description" content="Hi，好久不见。本期间隔时间稍微长了一些呀，因为最近都比较忙，工作也比较忙，自己的小项目也遇到了些困难。不过好在方向都是好的，做自己愿意做的事情，总是快乐的。
这段时间我听了几期感觉还不错的播客，推荐给大家：

[中美 SaaS 对比：差距...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://hwang.top/post/04-or-zi-yi-sheng-chang-by-hwang/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://hwang.top/media/css/prism-synthwave84.css">
  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://hwang.top" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      Hwang&#39;s Blog
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          #04 ｜ 恣意生长  by Hwang
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2022-03-22 · 11 min read</div>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <p>Hi，好久不见。本期间隔时间稍微长了一些呀，因为最近都比较忙，工作也比较忙，自己的小项目也遇到了些困难。不过好在方向都是好的，做自己愿意做的事情，总是快乐的。</p>
<p>这段时间我听了几期感觉还不错的播客，推荐给大家：</p>
<ul>
<li>[中美 SaaS 对比：差距与潜力]
<ul>
<li>节目聊了国内国外 SaaS 的差异，可以明显感受到各位投资人对国内 SaaS 其实并没有那么大的信心。[最近 Figma 的事件]，看起来利好国内 SaaS 但我觉得对于整个  SaaS 服务而言可能还是伤害更多，国内的老板们可能更加不信任 SaaS 了。</li>
</ul>
</li>
<li>[ E24｜奈飞产品总监：我眼中的“自由与责任” ]
<ul>
<li>奈飞的企业文化<strong>如此开放</strong>。相信我们也会有越多的自我实现需求大于经济利益的需求优秀的人，希望接下来国内的90、95后创业者们也能构建起这样的优秀团队。</li>
</ul>
</li>
<li>[ 远程办公，是现代企业的终局吗？从携程3+2混合办公展开 ]
<ul>
<li>我对携程的印象主要还是他们老板是经济学家。3+2 的办公模式可能也是个极大的社会实验吧。小团队实行这样的工作模式，能够获得一致或者更高的办公效率并不奇怪，不过如果是一个较大的组织能够落地这样的政策还是很令人钦佩的。</li>
</ul>
</li>
<li>[ #92. 拉丁美洲旅游2——秘鲁、古巴、巴西、巴拿马 ]
<ul>
<li>好想出去玩...</li>
</ul>
</li>
</ul>
<p>说起来，大家最早是什么时候开始听播客节目的？我印象中自己听播客的顺序大概是《科学脱口秀》、《友的聊》再到 李如一老师  及 [IPN] 的节目。</p>
<h2 id="产品-聊聊微软-与-linux">产品 —— 聊聊微软 与 Linux</h2>
<p>macOS 因为命令行友好，Unix 环境，以及相当不错的 GUI 体验而被广大开发者推崇。反观 Windows，无论是 CMD 还是 PowerShell 对于开发者来说都算不上优秀。不过随着 WSL （Windows Subsystem for Linux ）的推出，微软通过子系统的方式，为 Windows 开发者带来了完整的 Linux 的体验。</p>
<p>Windows Subsystem for Linux 是一个非常有趣的产品。对于开发者而言，通过 WSL，可以很方面的调用 Linux 上的各种命令，无需在额外安装 [Cygwin] 之类的为 Windows 提供类 Linux 环境的软件，抑或维护单独的虚拟机环境。只需开启 WSL 功能，再选择自己喜欢的发行版本即可。</p>
<p>在 2001 年，[时任微软 CEO 的鲍尔默称 Linux 是癌症]。那时的微软主要业务是 Windows 和 Office，这些商业软件与免费的开源软件是直接的竞争对手。</p>
<p>在微软现任 CEO 纳德拉上台后，「云为先」的战略指导下，微软逐渐转型为云计算公司，Azure 的 CTO [Mark Russinovich] 曾表示，Azure上运行的虚拟机有四分之一是 Linux 操作系统，在云计算这个领域，开源和 Linux  几乎是唯一选择。时间拨回到2015年，微软将自家的 .NET Core 带进 Linux 家庭，[纳德拉喊了那句 「Microsoft loves Linux.」，并且之后微软真的发布了自己的 Linux 发行版。]</p>
<p>从2001年到2015年，微软将 Linux 称为小偷转变为公开示爱，这中间是移动互联高速发展的十年，也是微软迷失在移动浪潮的十年。 Windows CE 到 Windows Mobile，再到 WIndows Phone，微软在用互联网几乎没有胜战。而这十年， Google 却凭借基于 Linux 的 Android 系统成为了与 iOS 分庭抗礼的操作系统。免费开源，占领市场的行为从 Linux 之于云服务到 Android  之于移动互联网都得到验证，很难说这些事实没有启发到微软。得益于 Windows Subsystem 的支持，最新推出的 Windows 11 也能够支持 Linux 的<em>特别版本</em> — Android 软件在其中运行。</p>
<h2 id="设计-人物-edward-hopper-爱德华霍普">设计 - 人物： Edward Hopper 爱德华·霍普</h2>
<p>(img)<br>
本期设计想聊聊这位艺术家，Hopper 最著名的画作当属于 1942年 创作的《夜游者》，最近上映的[《新蝙蝠侠》]这最后找到谜语人的一幕，在构图上就能明显感觉到致敬这幅名作。<br>
(img)<br>
“最切中要害的辛酸，不停重演的美国孤独感的浪漫形象。”</p>
<p>《夜游者》油画作于1942年，这一年日本偷袭珍珠港，美国向日本宣战。城市中的人们所能感受到的就像画中被夜晚放大的情绪 —— 不安与不确定。繁华的都市生活似乎就在身边，街道与室内的灯光的强烈对比，画中人眼神都自顾自的看着各处，没有喧闹没有嘈杂有的只是能够感同身受的不安。</p>
<p>Hopper 的画作以描绘寂寥的美国当代生活风景闻名，建筑、人与光影是 Hopper 绘画的重要主题。就像中国的写意山水一样，Hopper 的画作强在构建一种「氛围」，这种氛围是能够让人沉浸其中。</p>
<p>一些关于 Hopper 的事实：</p>
<ul>
<li>Hopper 年轻时，受到了严格的[浸信会（ Baptist ）]的教义熏陶。</li>
<li>曾经 Hopper 希望成为一名造船师，不过在父母鼓励下从事了艺术行业。</li>
<li>在完成早年教育后，他曾经前往欧洲三次，主要研究欧洲新兴的画风，但他舍弃了当时立体主义画派的抽象潮流，走向写实画派中的理想主义（idealism）。</li>
<li>Hopper 的画作常常绘制建筑，并且喜欢绘制建筑侧面的阳光。</li>
<li>Hopper 稀疏寂寥的绘画风格还影响了希区柯克的电影创作。</li>
<li>纽约佳士得2018年11月拍卖，Hopper 的《中餐厅（杂碎）》以9593.75万美元成交，折合人民币以6.672亿元成交。</li>
<li>Hopper 在四十一岁时与妻子结婚，婚后在新英格兰乡下和海边，夫妻俩几乎过着隐士般的生活。</li>
</ul>
<p><strong>更多关于 Hopper 的信息：</strong></p>
<ul>
<li>[ 'We are all Edward Hopper paintings now': is he the artist of the coronavirus age?]</li>
<li>[夜游者 | 爱德华·霍普]</li>
<li>[Edward Hopper]</li>
</ul>
<h2 id="编程-用-github-action-做-flutter-项目都-cicd自动发布到-testflight-上">编程 - 用 GitHub Action 做  Flutter 项目都 CI/CD，自动发布到 TestFlight 上</h2>
<p>之前团队的 [CI/CD] 都是在 GitLab 上跑的，最近因为种种方面考虑，我们把主要的代码仓库迁移到了 GitHub 上，自然的 CI/CD 也是要做迁移的。前后端部分，因为都是 Typescript 大家都比较熟练，没有遇到什么问题。这里可以展开介绍一下 Flutter 部分的。</p>
<p>CI/CD 就是通过命令行工具，完成项目的构建的自动化流水线。在这里我们会用到的命令行工具主要是：</p>
<ul>
<li>[flutter]： flutter官方的命令行工具</li>
<li>[xcodebuild]： Xcode 的命令行工具</li>
<li>[altool]：苹果官方的上传工具</li>
</ul>
<p>如果对上述工具不熟悉，可以参考给出的链接文档。</p>
<p>GitHub Action 提供了 Ubuntu、macOS、Windows 等系统的虚拟机运行环境，最需要在 <code>runs-on</code> 中注明即可，在费用上，GitHub 保持一贯的大度，开源项目是免费构建，私有仓库提供 2000 分钟的免费时长，超出部分将收费。收费标准根据不同类型的虚拟机[收费不同]，其中，macOS 是 ubuntu 的 10 倍收费…</p>
<p>在这个流程实现上，主要参考是：</p>
<ul>
<li>[ How to build and sign your Flutter iOS application using GitHub Actions ]</li>
</ul>
<p>并没有通过 Fastlane、Jenkins 之类的第三方 CI\CD 工具。所有过程都只需要 GitHub Action 即可完成。</p>
<ul>
<li>
<p>具体代码部分可以参考这个项目：👉 [https://github.com/damienaicheh/demo_flutter_github_actions]</p>
</li>
<li>
<p>当然也可以参考我的项目：👉[https://github.com/hwangdev97/flutter-github-action-build-to-testflight]</p>
</li>
</ul>
<p>其中，相对而言比较复杂的其实是证书相关的知识。其中包括：</p>
<ul>
<li><code>.P12</code> 证书：从 keychain （钥匙串）中导出的文件</li>
<li><code>provisoning_profile</code>，从 Apple Develop 后台到处的文件</li>
<li>以及 <code>APPSTORE_API_KEY_ID</code>、<code>APPSTORE_API_PRIVATE_KEY</code>、<code>APPSTORE_ISSUER_ID</code></li>
</ul>
<p>除了证书文件，这里还有一件事就是<strong>自动升级构建版本</strong>。</p>
<p>同样可以参考：[Manage your mobile application version automatically with GitHub Actions]</p>
<p>使用 <code> extract-version-from-tag-action</code> 这个的Action，既可以在 git tags 中获得<code>MAJOR \ MINOR \ PATCH</code> 等变量，以及 <code>NUMBER_OF_COMMITS</code> ( commits 的次数）<code>NUMBER_OF_COMMITS_SINCE_TAG</code> （上一个 tag 到目前的次数）这几个变量信息，就可以用于设定版本提升了。<em>（该项目代码里我们采用了修改 <code>info.plist</code> 的方案，而非直接读取 flutter 的版本号，这里大家可以自行斟酌）</em></p>
<p>最后，发送到 TestFlight 之后，还会发送一条通知消息到飞书。</p>
<p>题外话，最近一直在招聘 Flutter 开发，明显感觉原生开发很多都开始往跨平台方向转，并且新人很少，反之前端开发还是挺多的。</p>
<h2 id="最近读了啥">最近读了啥</h2>
<h3 id="design">Design</h3>
<ul>
<li>[building a modern home - Johnny Rodgers]</li>
<li>[Spline 进行了大更新]，更有3D版 Figma 那味儿了，并且发布了 React 的组件，不得不说，[从这个 Demo 看]效果还是有些惊艳的。</li>
<li>Figma 搞了件大事，[不过 Master GO 和 即时设计 的种种行为看的我稍微有些尴尬。]</li>
<li>[ 聊聊 UI 设计中的潜台词]</li>
</ul>
<h3 id="develop">Develop</h3>
<ul>
<li>[一把梭：REST API 全用 POST]</li>
<li>[ How to import Swagger APIs into Postman? ]</li>
<li>一套简单的 [uiui.dev] 按钮、handlines 的样式。</li>
<li>[🔗 Git Large File Storage (LFS)]：Git 的大文件存储。</li>
<li>如果在学习 React，也许看看这个会有帮助：[UseHooks]。</li>
<li>[Show a browser picker for date, time, color, and files]：Chrome 的 showPicker() 事件，调用日期选择。</li>
<li>[Flutter 2.10 稳定支持 Windows]</li>
<li>[原来 ARM 中国叫 安谋科技]</li>
<li>[钉钉 的 URL Scheme]</li>
<li>[TypeScript 如何从数组元素的值中定义 Union Type - 海岛心hey]</li>
<li>[8 万变 80 万 - V2EX] 二月在 v2ex 上很火的贴子，相信大家都有看到过，对别人的人生指指点点显然不符合我的观点，看还是挺好的。</li>
<li>[Figma for Developers]：开发人员都看看这个吧！尤其是 frontend。</li>
<li>[Making pixel-art with pure CSS]</li>
<li>[React for Vue Developers - Part 1]</li>
<li>[How to Use Correctly 'self' Keyword in Swift]</li>
</ul>
<h3 id="others">Others</h3>
<ul>
<li>[政治性emo了，怎么办？]</li>
<li>[巧用分类法解决使用卡片笔记时遇到的困境 - 少数派]</li>
<li>[building a modern home]，加拿大的朋友让我别做梦了，人家不一样🌚。</li>
<li>[The Fall of Roam]
<ul>
<li>题外话：笔记应用对每一位使用者而言都非常重要，选择一个靠谱团队开发产品非常重要。即便是 Logseq 和 Obsidian 这种纯文本软件，相互之间迁移也非完全没有成本。</li>
<li>另外用纯文本做笔记软件的，还请做好安全的备份…</li>
</ul>
</li>
<li>[为什么我讨厌「粉粉嫩嫩」的经期记录应用]</li>
<li>[400万社区工作者是如何被“逼”疯的？| 新世界]</li>
</ul>
<p><a href="https://growing.zhubai.love">通过竹白查看 🔗</a><br>
<a href="https://www.getrevue.co/profile/Hwang/">通过 revue 查看🔗</a></p>
<p><a href="https://hwang.top">Hwang</a> 📝 12月18日 📍 杭州</p>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
      </div>

      

      
        <div id="vlaine-comment"></div>
      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  <p style="text-align: left; color: brown;">
    生而为人，应该能够换尿布、策划入侵、杀猪、开船、造房子、
    写十四行诗、算账、建墙、正骨、抚慰临终之人、接受命令、
    下达命令、合作、独行、解决方程式、分析新问题、
    清理马粪、编程、烹饪美食、高效战斗、英勇牺牲。
    专业分工是给昆虫准备的。
</p>
    <br>
    <br>
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>

    <br>
    <p>...</p>
    <br>
    <center> <img
            src="https://img.shields.io/badge/dynamic/json?color=da282a&label=%E5%B0%91%E6%95%B0%E6%B4%BE%E5%85%B3%E6%B3%A8&query=%24.data.totalSubs&url=https%3A%2F%2Fapi.spencerwoo.com%2Fsubstats%2F%3Fsource%3Dsspai%26queryKey%3Dhwang" />
    </center>
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%BA%A7%E5%93%81-%E8%81%8A%E8%81%8A%E5%BE%AE%E8%BD%AF-%E4%B8%8E-linux">产品 —— 聊聊微软 与 Linux</a></li>
<li><a href="#%E8%AE%BE%E8%AE%A1-%E4%BA%BA%E7%89%A9-edward-hopper-%E7%88%B1%E5%BE%B7%E5%8D%8E%E9%9C%8D%E6%99%AE">设计 - 人物： Edward Hopper 爱德华·霍普</a></li>
<li><a href="#%E7%BC%96%E7%A8%8B-%E7%94%A8-github-action-%E5%81%9A-flutter-%E9%A1%B9%E7%9B%AE%E9%83%BD-cicd%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83%E5%88%B0-testflight-%E4%B8%8A">编程 - 用 GitHub Action 做  Flutter 项目都 CI/CD，自动发布到 TestFlight 上</a></li>
<li><a href="#%E6%9C%80%E8%BF%91%E8%AF%BB%E4%BA%86%E5%95%A5">最近读了啥</a>
<ul>
<li><a href="#design">Design</a></li>
<li><a href="#develop">Develop</a></li>
<li><a href="#others">Others</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://hwang.top/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://hwang.top/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
    <script type="application/javascript" src="https://unpkg.com/valine"></script>
<script type="application/javascript">
  new Valine({
    el: '#vlaine-comment',
    appId: 'dTgTog99vAEi8ws6LDdFg4iI-gzGzoHsz',
    appKey: 'CnvncVESy4G5mVQRxk1G9Uef',
    pageSize: 10,
    notify: true,
    avatar: 'mp',
    verify: true,
    placeholder: '来都来了，不妨评论一下',
    visitor: true,
    highlight: true,
    recordIP: true,
  })
</script>
  
  
</body>

</html>